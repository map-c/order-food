# 🍽️ 餐馆点餐系统 PRD（v0.7）

## 第 1 节｜项目概述
**产品名称**：餐馆点餐系统  
**形态**：单店版 Web 管理后台 + 用户 H5 点餐端（后期）  
**目标用户**：独立餐馆店主、前厅与后厨员工  

### 🎯 产品目标
通过“商家管理端 + 用户点餐 H5”实现点餐闭环，帮助餐馆提升效率、减少错单、降低人工成本。  
首期聚焦**商家管理端**，优先实现经营闭环（点餐 → 出单 → 收银 → 报表）。

---

## 第 2 节｜用户需求与痛点
| 用户 | 主要痛点 | 期望 |
|------|-----------|------|
| 店主 | 账目混乱、报表滞后 | 自动统计营业额与利润 |
| 收银员 | 手写错单、找零麻烦 | 一键下单与结账 |
| 后厨 | 口头传菜易漏单 | 实时出单、清晰菜品显示 |
| 顾客 | 等菜慢、账单错误 | 扫码下单、进度透明 |

---

## 第 3 节｜核心功能
### 🏠 商家管理端（MVP）
#### 🍱 菜品与套餐管理
- 菜品分类、规格、加料、图片、上下架  
- 实时沽清同步；批量导入导出  

#### 🪑 桌台与二维码管理
- 区域管理、桌码生成、取餐码模式  
- 桌台状态实时更新  

#### 💳 收银下单模块（新增）
> 店员可直接为顾客下单，适配无扫码场景。

| 功能 | 说明 |
|------|------|
| 快速点单 | 菜品可视化界面，支持规格、备注、搜索 |
| 订单预览 | 购物车模式，价格明细清晰 |
| 支付结账 | 微信/支付宝扫码或现金结账 |
| 出单打印 | 与 H5 共用打印逻辑 |
| 操作日志 | 所有订单变更记录 |

#### 📦 订单与出单管理
- 查看订单状态、退菜、撤单、语音提醒  
- 打印延迟 ≤ 2 秒  

#### 💰 支付与结算
- 微信/支付宝支付、退款、日结、对账  

#### 🧩 权限与角色
- 店主 / 收银员 / 后厨权限分级  
- 操作日志与审计记录  

#### 📊 报表中心
- 营业额、客单价、菜品销量、时段分析  
- 日报/月报导出  

#### ⚙️ 系统配置
- 营业时间、打印机、税率、角色管理  

---

## 第 4 节｜用户流程与交互
### 🧭 信息架构
```
商家端
├── 首页看板
├── 点餐模块（NEW）
│   ├── 菜品浏览 → 购物车 → 提交订单 → 出单打印 → 支付结账 
│
├── 订单管理
├── 菜品管理
├── 报表中心
└── 系统设置
```

### 🍽️ 核心流程一：收银下单
1. 店员选择桌号或外带  
2. 选择菜品 / 备注 → 提交订单  -> 出单打印 -> 后厨接单 -> 出菜
3. 自动出单打印  
4. 顾客扫码支付或现金结账  
5. 订单更新、报表同步  

---

## 第 5 节｜成功指标
| 层级 | 指标 | 目标 |
|------|------|------|
| 业务 | 翻台率提升 | ≥ +20% |
| 业务 | 错单率下降 | ≥ 90% |
| 效率 | 平均出单延迟 | ≤ 2 秒 |
| 效率 | 新用户学习时长 | ≤ 30 分钟 |
| 性能 | 系统可用率 | ≥ 99.9% |
| UX | 用户满意度 | ≥ 4.5 / 5 |

---

## 第 6 节｜技术与约束
### 🧱 技术架构
- **前端**：NextJS + TailwindCSS  
- **后端**：NextJS
- **数据库**：MySQL  
- **缓存**：Redis  
- **消息队列**：RabbitMQ  
- **打印代理**：Electron 本地服务  
- **监控**：Prometheus + Grafana  

### 🔐 安全与合规
- HTTPS 全程加密  
- 不存储支付敏感信息  
- 操作日志 ≥ 90 天留存  
- 数据加密存储（AES-256）

### 🖨️ 打印约束
- ESC/POS 协议打印机  
- 打印延迟 ≤ 2 秒  
- 支持断网缓存与重试  

### 🚧 系统约束
| 限制项 | 说明 |
|---------|------|
| 单店使用 | 不支持多门店 |
| 并发用户 | ≤ 10 |
| 网络要求 | Wi-Fi 稳定（≥10Mbps） |
| 数据保留 | ≥ 180 天 |
| 支付依赖 | 第三方服务商（如收钱吧） |

### 🧩 可扩展方向
- 用户 H5 点餐端  
- 会员与优惠模块  
- 云打印中心  
- 多门店 SaaS 扩展  
